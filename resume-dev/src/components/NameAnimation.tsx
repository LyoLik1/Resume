import React, { useEffect, useRef } from 'react';
import styles from './NameAnimation.module.css';
import gsap from 'gsap';

interface NameAnimationProps {
  onAnimationComplete?: () => void;
}

const NameAnimation: React.FC<NameAnimationProps> = ({ onAnimationComplete }) => {
  const svgRef = useRef<SVGSVGElement>(null);

  useEffect(() => {
    if (svgRef.current) {
      const paths = svgRef.current.querySelectorAll('path');
      const tl = gsap.timeline({
        defaults: { duration: 1, ease: 'power1.inOut' },
        onComplete: () => {
          if (onAnimationComplete) {
            onAnimationComplete();
          }
        }
      });

      paths.forEach((path) => {
        const length = path.getTotalLength();
        tl.set(path, {
          strokeDasharray: length,
          strokeDashoffset: length,
          fillOpacity: 0,
        });
      });

      tl.to(paths, {
        strokeDashoffset: 0,
        duration: 2.5, 
        stagger: 0.1, 
      }).to(
        paths,
        {
          fillOpacity: 1, 
          duration: 1, 
          stagger: 0.1, 
        },
        '-=1.5' 
      );
    }
  }, [onAnimationComplete]);

  return (
    <div className={styles.nameAnimationContainer}>
      <svg
        ref={svgRef} 
        id="Layer_2"
        data-name="Layer 2"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 908.09 65.08"
        className={styles.nameSvg}
      >
        <g id="Layer_1-2" data-name="Layer 1">
          <g>
            <path d="m56.47,64.07h-2.94V7.43l-24.57,36.39h-1.45L2.94,7.43v56.65H0V1.05h2.15l26.06,38.76L54.32,1.05h2.15v63.02Z" />
            <path d="m84.56,64.07h-2.94v-27.11L61.75,1.05h3.38l17.93,32.52L101.04,1.05h3.38l-19.86,35.9v27.11Z" />
            <path d="m150.36,64.07h-4.13l-33.53-28.78-.04.09v28.7h-2.94V1.05h2.94v30.37L144.78,1.05h4.22l-34.23,32.3,35.6,30.72Z" />
            <path d="m178.45,64.07h-2.94v-27.11L155.64,1.05h3.38l17.93,32.52L194.93,1.05h3.38l-19.86,35.9v27.11Z" />
            <path d="m224.91,64.07h-2.94V3.78h-18.37V1.05h39.73v2.72h-18.41v60.29Z" />
            <path d="m305.52,64.07h-3.3l-9.14-20.92h-32.04l-9.14,20.92h-3.3L276.86,0h.44l28.21,64.07Zm-13.67-23.69l-14.77-33.79-14.81,33.79h29.58Z" />
            <path d="m382.05,64.34h-1.41l-46.36-57v56.73h-2.9V.62h1.19l46.54,57.17V1.05h2.94v63.28Z" />
            <path d="m390.23,64.07h-2.9V1.05h2.9v63.02Z" />
            <path d="m430.14,64.07h-34.63V1.05h34.63v2.72h-31.68v28.78h28.56v2.77h-28.56v25.97h31.68v2.77Z" />
            <path d="m479.86,64.07h-44.43v-1.41L474.58,3.78h-38.23V1.05h42.67v1.27l-39.16,58.97h39.99v2.77Z" />
            <path d="m535.81,64.34h-1.41l-46.36-57v56.73h-2.9V.62h1.19l46.54,57.17V1.05h2.94v63.28Z" />
            <path d="m598,64.07h-3.3l-9.14-20.92h-32.04l-9.14,20.92h-3.3L569.35,0h.44l28.21,64.07Zm-13.67-23.69l-14.77-33.79-14.81,33.79h29.58Z" />
            <path d="m643.94,64.07h-4.13l-33.53-28.78-.04.09v28.7h-2.94V1.05h2.94v30.37l32.12-30.37h4.22l-34.23,32.3,35.6,30.72Z" />
            <path d="m681.65,65c-6.04,0-11.51-1.45-16.41-4.35-4.91-2.9-8.8-6.8-11.69-11.71-2.89-4.91-4.33-10.36-4.33-16.37s1.45-11.41,4.35-16.3c2.9-4.89,6.8-8.8,11.71-11.71,4.91-2.92,10.36-4.37,16.37-4.37s11.45,1.45,16.35,4.35c4.89,2.9,8.79,6.8,11.69,11.69,2.9,4.89,4.35,10.34,4.35,16.35s-1.46,11.42-4.37,16.33c-2.92,4.91-6.82,8.82-11.71,11.73-4.89,2.92-10.33,4.37-16.3,4.37Zm0-2.81c5.42,0,10.36-1.34,14.81-4.02,4.45-2.68,8-6.26,10.66-10.74,2.65-4.48,3.98-9.43,3.98-14.85s-1.32-10.41-3.96-14.88c-2.64-4.47-6.18-8.03-10.63-10.68-4.45-2.65-9.4-3.98-14.85-3.98s-10.36,1.33-14.83,4c-4.47,2.67-8.04,6.23-10.7,10.7-2.67,4.47-4,9.41-4,14.83s1.33,10.42,3.98,14.9c2.65,4.48,6.21,8.06,10.68,10.72,4.47,2.67,9.43,4,14.88,4Z" />
            <path d="m775.79,64.07h-2.94V7.43l-24.57,36.39h-1.45l-24.57-36.39v56.65h-2.94V1.05h2.15l26.06,38.76,26.1-38.76h2.15v63.02Z" />
            <path d="m813.51,65c-6.04,0-11.51-1.45-16.41-4.35-4.91-2.9-8.8-6.8-11.69-11.71-2.89-4.91-4.33-10.36-4.33-16.37s1.45-11.41,4.35-16.3c2.9-4.89,6.8-8.8,11.71-11.71,4.91-2.92,10.36-4.37,16.37-4.37s11.45,1.45,16.35,4.35c4.89,2.9,8.79,6.8,11.69,11.69,2.9,4.89,4.35,10.34,4.35,16.35s-1.46,11.42-4.37,16.33c-2.92,4.91-6.82,8.82-11.71,11.73-4.89,2.92-10.33,4.37-16.3,4.37Zm0-2.81c5.42,0,10.36-1.34,14.81-4.02,4.45-2.68,8-6.26,10.66-10.74,2.65-4.48,3.98-9.43,3.98-14.85s-1.32-10.41-3.96-14.88c-2.64-4.47-6.18-8.03-10.63-10.68-4.45-2.65-9.4-3.98-14.85-3.98s-10.36,1.33-14.83,4c-4.47,2.67-8.04,6.23-10.7,10.7-2.67,4.47-4,9.41-4,14.83s1.33,10.42,3.98,14.9c2.65,4.48,6.21,8.06,10.68,10.72,4.47,2.67,9.43,4,14.88,4Z" />
            <path d="m879.83,65.08h-.44L851.18,1.05h3.3l25.14,57.44,25.18-57.44h3.3l-28.26,64.03Z" />
          </g>
        </g>
      </svg>
    </div>
  );
};

export default NameAnimation;